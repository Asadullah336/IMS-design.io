<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Home Expense Manager with Login & Chart</title>

<link rel="stylesheet" href="style.css" />
</head>
<body>
<!-- LOGIN PAGE -->
<div id="loginPage">
  <h2>Login to Home Expense Manager</h2>
  <div id="loginError"></div>
  <input type="text" id="usernameInput" placeholder="Username" autocomplete="off" />
  <input type="password" id="passwordInput" placeholder="Password" autocomplete="off" />
  <span id="togglePassword" title="Show/Hide Password"></span>
  <button onclick="login()">Login</button>
</div>

<!-- MAIN APP -->
<div class="container" id="app" style="display:none;">
  <button id="logoutBtn" onclick="logout()">Logout</button>
  <h1>Home Expense Manager</h1>

  <!-- Add Expense Form -->
  <form id="expenseForm">
    <div>
      <input type="date" id="date" required />
      <input type="text" id="item" placeholder="Item" required />
      <input type="number" id="quantity" placeholder="Qty" step="0.01" min="0.01" required />
      <select id="unit">
        <option>gram</option>
        <option>kg</option>
        <option>litre</option>
        <option>piece</option>
      </select>
      <input type="number" id="amount" placeholder="Total ₹" step="0.01" min="0.01" required />
    </div>
    <button type="submit">Add</button>
  </form>

  <!-- Search Bar -->
  <input type="text" id="searchBar" placeholder="Search by Item or Date..." oninput="filterExpenses()" />

  <!-- Expense Table -->
  <table>
    <thead>
      <tr>
        <th>S.No</th>
        <th>Date</th>
        <th>Item</th>
        <th>Qty</th>
        <th>Unit</th>
        <th>Amount (₹)</th>
        <th>Price/Unit (₹)</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="expenseTableBody"></tbody>
  </table>

  <div class="total">Total: ₹<span id="totalAmount">0.00</span></div>

  <div class="monthly-report" id="monthlyReport"></div>

  <div id="chartContainer">
    <canvas id="monthlyChart" width="100%" height="40"></canvas>
  </div>

  <button id="exportPDFBtn" onclick="exportPDF()">Export Items to PDF</button>
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- html2pdf CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

<script src="script.js"></script>

</body>
</html>
